{% extends 'admin/layout.html' %}
{% block sub_title %}Edit Instance{% endblock %}
{% block body %}
  <main class="admin-shell">
    <section class="admin-card">
      <h1 class="admin-no-margin-top">Edit {{ instance }}</h1>
      {% if app_name == 'specs' and model_name == 'spec' %}
        <p class="admin-help">Tip: update all parts in <strong>Parts Table</strong> (`Part|Part Name` per line). Changing slug changes the spec URL.</p>
      {% elif app_name == 'specs' and model_name == 'part' %}
        <p class="admin-help">Changing a part name updates every spec that references this part.</p>
      {% elif app_name == 'bots' and model_name == 'botinstance' %}
        <p class="admin-help">Set <strong>out of commission</strong> to disable this instance visually on the public bot page.</p>
      {% elif app_name == 'bots' and model_name == 'bot' %}
        <p class="admin-help">Bot title and slug control the route under <strong>/bots/</strong>.</p>
      {% endif %}
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {% for field in form %}
          <div class="admin-form-row">
            <label for="{{ field.id_for_label }}">{{ field.label }}</label>
            <div>{{ field }}</div>
            {% if field.help_text %}
              <small class="admin-muted">{{ field.help_text }}</small>
            {% endif %}
            {% if field.errors %}
              <p class="admin-error">{{ field.errors|striptags }}</p>
            {% endif %}
          </div>
        {% endfor %}
        <div class="admin-actions">
          <button class="admin-btn" type="submit">Save Changes</button>
          <a class="admin-btn danger" href="{% url 'custom_admin:delete_instance' app_name=app_name model_name=model_name pk=instance.pk %}">Delete</a>
          <a class="admin-btn" href="{% url 'custom_admin:model_instances' app_name=app_name model_name=model_name %}">Cancel</a>
        </div>
      </form>
    </section>
  </main>
{% endblock %}
